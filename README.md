# Feature Salad
Generation of random datasets.

## Installation
Using [pip](https://pip.pypa.io/en/stable/installation/):
```shell
pip install feature-salad
```

Using [pipx](https://pypa.github.io/pipx/):
```shell
pipx install feature-salad
```

## Usage
Feature Salad is available as a python library and as CLI.

In Python, a `FeatureSalad` instance is created as:
```python
fs = FeatureSalad(samples=100, features=[{'n': 5, 'dtype': 'category'}])
```
where `samples` receives an integer defining how many rows should be generated in the final dataset and `features` receives an array defining each of the feature groups. The next section provides detailed instructions on how to define an array of feature groups.

The dataset is generated by calling the `generate()` method and is be accesible as a Pandas DataFrame `X`:
```python
fs.generate()
fs.X.head()
fs.X.to_parquet('salad.parquet')
```

When using the CLI, it's enough to run the following:
```shell
feature-salad <definition_file> <output_file>
```
where `<definition_file>` is a YAML file defining features groups and number of samples:
```yaml
samples: 100
features:
    - n: 5
      dtype: category
```
and `<output_file>` sets the file where the resulting dataset will be saved to. It supports `csv` and `parquet` formats, based on the extension provided - e.g.: `salad.parquet`.

### Feature Groups Definition
Feature groups are defined based on the following parameters:
- `n` [optional]: number of features in the group. If not provided, only one feature will be generated.
- `name` [optional]: list with feature names. If not provided, random names will be generated. If less than `n` names are provided, the remaining ones will be randomly generated.
- `dtype`: data type of the features in the group, it can be `datetime`, `int`, `float`, `category` `string` or `boolean`.

For `datetime`, `int` and `float` only:
- `between` [optional]: bounds of generated values in the format `[<lower_bound>, <upper_bound>]`. Must match the data type in `dtype`. Dates can be expressed in any ISO format.

For `string` and `category` only:
- `made_of` [optional]: can assume the values of `words` or `integers`, defining if the features values should be random integers or random words. Default: `words`.
- `distinct` [optional]: desired number of distinct feature values. Default: `10`.

### Full Python Example:
```python
from feature_salad import FeatureSalad
feature_groups = [
    {'n': 3, 'dtype': 'boolean'},
    {'n': 4, 'dtype': 'category', 'made_of': 'words'},
    {'dtype': 'datetime', 'name': ['event_date'], 'between': ['2022-01-01', '2022-12-31']}
]
fs = FeatureSalad(samples=500, features=feature_groups)
fs.generate()
fs.X.head()
```

### Full CLI Example:
YAML definition:
```yaml
samples: 500
features:
    - n: 3
      dtype: boolean
    - n: 4
      dtype: category
      made_of: words
    - dtype: datetime
      name: [event_date]
      between: ['2022-01-01', '2022-12-31']
```
Command:
```shell
feature-salad definition.yaml salad.parquet
```
